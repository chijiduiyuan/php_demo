
1.借助手机网页模板,显示网站的产品信息(列表+详细)

2.网页授权 接口,实现 注册/登录 功能

   获取用户信息后 设置登录状态
   
   
   开发流程:
   0)设置网页授权域名

   1)跳转到 获取code页面(用户同意)
   2)通过code 换取网页授权 access_token(注意和接口access_token不一样)
   3)获取用户信息
   4)判断openid 是否存在用户表,如果存在 设置登录状态(使用session)
                              不存在,添加到用户表,设置登录状态

   5)跳转到指定页 如:列表页等

3.转移到正式微信服务号中,测试微信支付功能
   1)把测试号中的url和token,填到正式公众号网页平台中 启用,设置ip白名单(就使用微信接口服务器ip)
   2)网站后台修改appid,应用密码



4.保存下单-->微信支付

   准备功能:
   0.申请微信支付(已认证的服务号,未认证的服务号先认证)

   1.获取微信支付 商户号\支付秘钥  公众号的 appid 应用密钥
   2.设置授权域名 js安全域名/网页授权域名/ 设置支付授权目录
   3.调用微信支付SDK(把微信公众号支付SDK包放到项目中)

   结合网站产品实现微信端购买

   调用微信支付
    //调用微信支付
   header("location:/weixin/js_api_call.php?out_trade_no=" . $sn . "&subject=" . $info['title'] . "&total_fee=" . $info['price']);
   
   1)修改支付接口配置WxPay.pub.config.php的
    商户号\支付秘钥  公众号appid 应用密钥,异步通知url

   2)修改 js_api_call.php,同步支付成功后,js跳转地址

   3)修改 notify_url.php 支付成功后微信服务器访问通知地址,再次代码中修改订单状态

   测试代码:注意微信支付不允许跨公众号支付,需要到微信支付所在的公众号中测试

   

   

5.第三方微信公众平台 --了解一下

   WeiPHP 免费的微信开发框架(基于thinkphp框架),已有基本功能,适合二次开发
 
   有赞--基于微信的微商城系统 可以免费使用,交易扣点,增值服务收费 

   微盟---综合平台 需要购买套餐,不同功能不同价格

   微赞\小猪  卖系统,安装直接使用

   ......


